/**
 * Viewport стили
 * Решает проблему адресной строки на мобильных устройствах
 */

/* CSS Custom Properties для viewport */
:root {
  /* Основные viewport единицы */
  --viewport-height: 100vh; /* fallback для старых браузеров */
  --viewport-height: 100dvh; /* динамическая высота для современных браузеров */

  /* Альтернативные viewport единицы */
  --viewport-height-small: 100vh; /* fallback */
  --viewport-height-small: 100svh; /* минимальная высота (с UI элементами) */

  --viewport-height-large: 100vh; /* fallback */
  --viewport-height-large: 100lvh; /* максимальная высота (без UI элементов) */

  /* Viewport с учетом safe area для iOS */
  --viewport-height-safe: calc(
    100vh - env(safe-area-inset-top) - env(safe-area-inset-bottom)
  );
  --viewport-height-safe: calc(
    100dvh - env(safe-area-inset-top) - env(safe-area-inset-bottom)
  );
}

/* Fallback для браузеров без поддержки новых viewport единиц */
@supports not (height: 100dvh) {
  :root {
    --viewport-height: calc(var(--vh, 1vh) * 100);
    --viewport-height-small: calc(var(--vh, 1vh) * 100);
    --viewport-height-large: calc(var(--vh, 1vh) * 100);
    --viewport-height-safe: calc(
      var(--vh, 1vh) * 100 - env(safe-area-inset-top) -
        env(safe-area-inset-bottom)
    );
  }
}

/* Utility классы для viewport */
.h-viewport {
  height: var(--viewport-height);
}

.min-h-viewport {
  min-height: var(--viewport-height);
}

.h-viewport-small {
  height: var(--viewport-height-small);
}

.h-viewport-large {
  height: var(--viewport-height-large);
}

.h-viewport-safe {
  height: var(--viewport-height-safe);
}

/* Мобильные оптимизации */
@media (max-width: 768px) {
  .h-viewport,
  .min-h-viewport {
    /* Предотвращаем "резиновый" скролл */
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
}

/* Специальные стили для iOS */
@supports (-webkit-touch-callout: none) {
  .h-viewport-ios {
    height: var(--viewport-height-safe);
  }
}
